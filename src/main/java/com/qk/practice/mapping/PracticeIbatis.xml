<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.qk.practice.dao.IPracticeDao">	<resultMap id="PracticeResultMap" type="Practice" >		<id property="practiceId" column="practice_id"/>		<result property="code" column="code"/>		<result property="title" column="title"/>		<result property="description" column="description"/>		<result property="attachment" column="attachment"/>		<result property="isPublic" column="is_public"/>		<result property="statusId" column="status_id"/>		<result property="isDelete" column="is_delete"/>		<result property="createdTime" column="created_time"/>		<result property="lastModifiedBy" column="last_modified_by"/>		<result property="lastModifiedTime" column="last_modified_time"/>		<association property="subject" select="com.qk.practice.dao.ISubjectDao.getSubjectById" column="subject_id" javaType="Subject"/>		<association property="anwser" select="com.qk.practice.dao.IAnwserDao.getAnwserById" column="anwser_id" javaType="Anwser"/>		<collection property="tags" select="com.qk.practice.dao.ITagDao.getTagByPracticeId" column="practice_id" ofType="Tag"></collection>	</resultMap>	<sql id="Practice_Column_List" >	    practice_id, subject_id, anwser_id, code, title,description,attachment,is_public,status_id,is_delete,created_time,last_modified_by,last_modified_time	</sql>		<!-- select -->	<select id="getPracticeById" resultMap="PracticeResultMap" parameterType="java.lang.String" >	    select <include refid="Practice_Column_List" />	    from practice	    where is_delete = 'N'	    and practice_id = #{practiceId}	 </select>	 	 <select id="getPractices" resultMap="PracticeResultMap">	    select p.practice_id, p.subject_id, p.anwser_id, p.code, p.title,p.description,	    	   p.attachment,p.is_public,p.status_id,p.created_time,p.last_modified_by,p.last_modified_time	    from practice p, subject s	    where p.is_delete = 'N' and p.subject_id = s.subject_id 	    <if test="practice.practiceId != null" >	    	and p.practice_id = #{practice.practiceId}	    </if>	    <if test="practice.code != null" >	    	and p.code = #{practice.code}	    </if>	    <if test="practice.title != null" >	    	and p.title like '%${practice.title}%'	    </if>	    <if test="practice.subject != null and practice.subject.name != null" >	    	and s.name = #{practice.subject.name}	    </if>	    <if test="practice.statusId != null" >	    	and p.status_id = #{practice.statusId}	    </if>	 </select>	 	 <!-- delete -->	 <delete id="deletePracticeById" parameterType="java.lang.String" >	    delete from practice	    where practice_id = #{practiceId,jdbcType=VARCHAR}	  </delete>		  <!-- update -->	  <update id="updatePracticeById" >	    update practice	    set code = #{practice.code},	        title = #{practice.title},	        description = #{practice.description},	        attachment = #{practice.attachment},	        is_public = #{practice.isPublic},	        status_id = #{practice.statusId},	        last_modified_by = #{practice.lastModifiedBy},	        last_modified_time = #{practice.lastModifiedTime}	        <if test="practice.subject != null">	        	,subject_Id = #{practice.subject.subjectId}	        </if>	        <if test="practice.anwser != null">	        	,anwser_Id = #{practice.anwser.anwserId}	        </if>	    where practice_id = #{practice.practiceId}	  </update>	  	  <!-- insert -->	 <insert id="insertPractice" parameterType="Practice">	    insert into practice	    <trim prefix="(" suffix=")" suffixOverrides="," >	      <include refid="Practice_Column_List" />	    </trim>	    <trim prefix="values (" suffix=")" suffixOverrides="," >	        #{practiceId},	      <if test="subject != null" >	        #{subject.subjectId},	      </if>	      <if test="anwser != null" >	        #{anwser.anwserId},	      </if>	      #{code}, #{title},#{description},#{attachment},#{isPublic},#{statusId},'N',#{createdTime},#{lastModifiedBy},#{lastModifiedTime}	    </trim>	  </insert></mapper>